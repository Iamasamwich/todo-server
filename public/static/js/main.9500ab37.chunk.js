(this["webpackJsonptodo-client"]=this["webpackJsonptodo-client"]||[]).push([[0],{104:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n(14),o=n.n(c),r=n(7),s=n(22),u=n(45),i=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return"LOGIN"===t.type?t.payload:e},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"home",t=arguments.length>1?arguments[1]:void 0;return"CHANGE_PAGE"===t.type?t.payload:e},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return"STATUS"===t.type?t.payload:e},j=n(9),b=n(23),p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TODOS":var n=t.payload,a=n.sort((function(e,t){return e.done===t.done?0:e.done?1:-1}));return a;case"ADD_TODO":var c=[].concat(Object(b.a)(e),[t.payload]);return c.sort((function(e,t){return e.done===t.done?0:e.done?1:-1}));case"UPDATE_TODO":var o=t.payload,r=e.map((function(e){return e.id!==o.id?e:t.payload}));return r.sort((function(e,t){return e.done===t.done?0:e.done?1:-1}));case"REMOVE_TODO":console.log(t.payload);var s=Object(b.a)(e),u=t.payload;return s.filter((function(e){return e.id!==u.todoId}));case"ADD_STEP":var i=t.payload;return e.map((function(e){return i.todoId===e.id?Object(j.a)(Object(j.a)({},e),{},{steps:[].concat(Object(b.a)(e.steps),[i])}):e}));case"UPDATE_STEP":var d=t.payload;return e.map((function(e){if(d.todoId===e.id){var t=e.steps.map((function(e){return e.id===d.id?d:e}));return Object(j.a)(Object(j.a)({},e),{},{steps:t})}return e}));case"REMOVE_STEP":var l=t.payload,p=Object(b.a)(e);return p.map((function(e){if(e.id!==l.todoId)return e;var t=e.steps.filter((function(e){return e.id!==l.stepId}));return Object(j.a)(Object(j.a)({},e),{},{steps:t})}));default:return e}},O=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return"TODOS_FETCHED"===t.type||e},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"active",t=arguments.length>1?arguments[1]:void 0;return"SHOW_TODOS"===t.type?t.payload:e},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return"TODO_TO_EDIT"===t.type?t.payload:e},v=Object(s.b)({page:d,login:i,appStatus:l,todos:p,showTodos:f,todosFetched:O,todoToUpdate:h}),y=(n(57),n(6)),x=n.n(y),m=n(8),g=function(e,t,n){return fetch(function(){switch(window.location.host){case"localhost:3001":return"http://localhost:3000";case"192.168.43.5:3001":return"http://192.168.43.5:3000";default:return""}}()+e,{method:t,headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(n)}).then((function(e){return e.json()}))},T=n(5),S=function(e){return function(){var t=Object(m.a)(x.a.mark((function t(n){return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:"TODO_TO_EDIT",payload:null}),n({type:"CHANGE_PAGE",payload:e}),t.abrupt("return");case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},N=n(0),E={logout:function(){return function(e){e({type:"STATUS",payload:"loading"}),g("/login","PUT").then((function(t){return 200===t.status?(e({type:"STATUS",payload:null}),e({type:"LOGIN",payload:!1}),void e({type:"CHANGE_PAGE",payload:"home"})):(e({type:"LOGIN",payload:!1}),void e({type:"STATUS",payload:t.status}))}))}},changePage:S},w=Object(r.b)((function(e){return{login:e.login,page:e.page}}),E)((function(e){var t=e.login,n=e.page,c=e.logout,o=e.changePage,r=Object(a.useState)(!1),s=Object(T.a)(r,2),u=s[0],i=s[1],d=Object(a.useRef)();Object(a.useEffect)((function(){var e=function(e){d.current&&d.current.contains(e.target)||i(!1)};return document.body.addEventListener("click",e),function(){return document.body.removeEventListener("click",e)}}),[]);var l=function(){return Object(N.jsx)("div",{className:"nav-menu ".concat(u?"menu-open":""),children:t?Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("div",{className:"menu-item",onClick:function(){return function(e){if(i(!1),"logout"===e)return c()}("logout")},children:"Log Out"}),Object(N.jsx)("div",{className:"menu-item",onClick:function(){return o("editUser")},children:"Profile"})]}):null})};return Object(N.jsxs)("div",{ref:d,className:"navbar",children:[t?Object(N.jsx)("div",{className:"nav-icon",onClick:function(){return i(!u)},children:"\u2630"}):null,"home"!==n?Object(N.jsx)("div",{className:"nav-icon",onClick:function(){return o("home")},children:"\u2302"}):null,Object(N.jsx)(l,{})]})})),A=function(){return Object(N.jsxs)("div",{className:"Logo",children:[Object(N.jsx)(w,{}),Object(N.jsx)("h1",{className:"logo-text",children:"THINGS TO DO"})]})},D={login:function(e){return function(){var t=Object(m.a)(x.a.mark((function t(n){return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g("/login","POST",e).then((function(e){return 200===e.status?n({type:"LOGIN",payload:!0}):(n({type:"LOGIN",payload:!1}),void n({type:"STATUS",payload:e.status}))})).catch((function(e){return n({type:"LOGIN",payload:!1})}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},changePage:S},C=Object(r.b)(null,D)((function(e){var t=e.login,n=e.changePage,c=Object(a.useState)(""),o=Object(T.a)(c,2),r=o[0],s=o[1],u=Object(a.useState)(""),i=Object(T.a)(u,2),d=i[0],l=i[1],j=Object(a.useState)(!1),b=Object(T.a)(j,2),p=b[0],O=b[1],f=Object(a.useState)(!1),h=Object(T.a)(f,2),v=h[0],y=h[1],x=Object(a.useState)(!1),m=Object(T.a)(x,2),g=m[0],S=m[1];Object(a.useEffect)((function(){/^[a-z0-9.]+@[a-z0-9]+.[a-z0-9]+.[a-z0-9]{1,3}$/.test(r)?O(!1):O(!0)}),[r]),Object(a.useEffect)((function(){d.length>0?y(!1):y(!0)}),[d]),Object(a.useEffect)((function(){S(!(!p&&!v))}),[p,v]);var E=function(){return Object(N.jsx)("div",{className:"form-buttons",children:Object(N.jsx)("button",{className:"green",onClick:function(){return t({email:r,pword:d})},children:"Login"})})},w=function(){g||t({email:r,pword:d})};return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(A,{}),Object(N.jsxs)("div",{className:"minusLogo",children:[Object(N.jsx)("h1",{children:"LOGIN"}),Object(N.jsxs)("div",{className:"form-box",children:[Object(N.jsx)("label",{children:"Email:"}),Object(N.jsx)("input",{className:p?"error":"",value:r,onChange:function(e){return s(e.target.value.toLowerCase())},onKeyDown:function(e){return"Enter"===e.code?w():null}}),Object(N.jsx)("label",{children:"Password:"}),Object(N.jsx)("input",{className:v?"error":"",type:"password",value:d,onChange:function(e){return l(e.target.value)},onKeyDown:function(e){return"Enter"===e.code?w():null}}),g?null:Object(N.jsx)(E,{}),Object(N.jsx)("p",{className:"fake-link",onClick:function(){return n("createAccount")},children:"Create Account"})]})]})]})})),U={createAccount:function(e){return function(){var t=Object(m.a)(x.a.mark((function t(n){return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("here"),t.next=3,g("/user","POST",e).then((function(e){return 201===e.status?void n({type:"LOGIN",payload:!0}):(n({type:"LOGIN",payload:!1}),n({type:"STATUS",payload:e.status}),void n({type:"CHANGE_PAGE",payload:"home"}))})).catch((function(e){}));case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},changePage:S},P=Object(r.b)(null,U)((function(e){var t=e.createAccount,n=e.changePage,c=Object(a.useState)(""),o=Object(T.a)(c,2),r=o[0],s=o[1],u=Object(a.useState)(""),i=Object(T.a)(u,2),d=i[0],l=i[1],j=Object(a.useState)(""),b=Object(T.a)(j,2),p=b[0],O=b[1],f=Object(a.useState)(""),h=Object(T.a)(f,2),v=h[0],y=h[1],x=Object(a.useState)(!1),m=Object(T.a)(x,2),g=m[0],S=m[1],E=Object(a.useState)(!1),w=Object(T.a)(E,2),D=w[0],C=w[1],U=Object(a.useState)(!1),P=Object(T.a)(U,2),k=P[0],I=P[1],G=Object(a.useState)(!1),L=Object(T.a)(G,2),_=L[0],F=L[1],z=Object(a.useState)(!1),H=Object(T.a)(z,2),M=H[0],K=H[1];Object(a.useEffect)((function(){S(!r)}),[r]),Object(a.useEffect)((function(){/^[a-z0-9.]+@[a-z0-9]+.[a-z0-9]+.[a-z0-9]{1,3}$/.test(d)?C(!1):C(!0)}),[d]),Object(a.useEffect)((function(){I(!p)}),[p]),Object(a.useEffect)((function(){F(!v||p!==v)}),[p,v]),Object(a.useEffect)((function(){K(!!(g||D||k||_))}),[g,D,k,_]);var R=function(){return Object(N.jsxs)("div",{className:"form-buttons",children:[M?null:Object(N.jsx)("button",{className:"green",onClick:function(){return t({name:r,email:d,pword:p})},children:"Sign Up"}),Object(N.jsx)("button",{className:"red",onClick:function(){return n("home")},children:"Cancel"})]})};return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(A,{}),Object(N.jsxs)("div",{className:"minusLogo",children:[Object(N.jsx)("h1",{children:"CREATE ACCOUNT"}),Object(N.jsxs)("div",{className:"form-box",children:[Object(N.jsx)("label",{children:"Name:"}),Object(N.jsx)("input",{className:g?"error":"",value:r,onChange:function(e){return s(e.target.value)}}),Object(N.jsx)("label",{children:"Email:"}),Object(N.jsx)("input",{className:D?"error":"",value:d,onChange:function(e){return l(e.target.value)}}),Object(N.jsx)("label",{children:"Password:"}),Object(N.jsx)("input",{type:"password",className:k?"error":"",value:p,onChange:function(e){return O(e.target.value)}}),Object(N.jsx)("label",{children:"Confirm Password:"}),Object(N.jsx)("input",{type:"password",className:_?"error":"",value:v,onChange:function(e){return y(e.target.value)}}),Object(N.jsx)(R,{})]})]})]})})),k=function(e){return function(t){return t({type:"STATUS",payload:e})}},I={setStatus:k},G=Object(r.b)(null,I)((function(e){var t=e.statusCode,n=e.setStatus;return Object(N.jsx)("div",{className:"Status",onClick:function(){return n(null)},children:Object(N.jsxs)("div",{className:"status-box",children:[Object(N.jsx)("h1",{children:"Error!"}),Object(N.jsx)("h1",{children:function(){switch(t){case 401:return"Not Authorised";case 406:return"Invalid inputs";case 404:return"Not found";case 409:return"Duplication";default:return"There was a problem with your request"}}()}),Object(N.jsx)("p",{children:"*click anywhere to dismiss*"})]})})})),L=function(){return Object(N.jsx)("div",{className:"Status",children:Object(N.jsxs)("div",{className:"status-box",children:[Object(N.jsx)("h1",{children:"Loading"}),Object(N.jsx)("div",{className:"spinner"})]})})},_=Object(r.b)((function(e){return{appStatus:e.appStatus}}))((function(e){var t=e.appStatus,n=function(){return"loading"===t?Object(N.jsx)(L,{}):Object(N.jsx)(G,{statusCode:t})};return null===t?null:Object(N.jsx)(n,{})})),F=function(e){return function(){var t=Object(m.a)(x.a.mark((function t(n){var a;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:"STATUS",payload:"loading"}),n({type:"TODO_TO_EDIT",payload:null}),a={todo:e.todo,done:!!e.done,dueDate:e.dueDate},t.next=5,g("/todo/".concat(e.id),"PUT",a).then((function(e){return 202===e.status?(n({type:"CHANGE_PAGE",payload:"home"}),n({type:"STATUS",payload:null}),void n({type:"UPDATE_TODO",payload:e.todo})):401===e.status?(n({type:"LOGIN",payload:!1}),void n({type:"STATUS",payload:401})):void n({type:"STATUS",payload:e.status})})).catch((function(e){}));case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},z={updateStep:function(e){return function(){var t=Object(m.a)(x.a.mark((function t(n){return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:"STATUS",payload:"loading"}),t.next=3,g("/todo/".concat(e.todoId,"/step/").concat(e.stepId),"PUT",e.body).then((function(e){return 202===e.status?(n({type:"STATUS",payload:null}),void n({type:"UPDATE_STEP",payload:e.step})):401===e.status?(n({type:"LOGIN",payload:!1}),void n({type:"STATUS",payload:401})):n({type:"STATUS",payload:e.status})})).catch((function(e){}));case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},deleteStep:function(e,t){return function(){var n=Object(m.a)(x.a.mark((function n(a){return x.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a({type:"STATUS",payload:"loading"}),n.next=3,g("/todo/".concat(t,"/step/").concat(e),"DELETE").then((function(n){return 202===n.status?(a({type:"STATUS",payload:null}),void a({type:"REMOVE_STEP",payload:{stepId:e,todoId:t}})):401===n.status?(a({type:"LOGIN",payload:!1}),void a({type:"STATUS",payload:401})):void a({type:"STATUS",payload:n.status})}));case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}},H=Object(r.b)(null,z)((function(e){var t=e.step,n=e.updateStep,a=e.deleteStep;return Object(N.jsxs)("div",{className:"step",children:[Object(N.jsx)("div",{className:t.done?"greenText step-icons icons":"step-icons icons",onClick:function(){return function(){var e={step:t.step,done:!t.done};n({stepId:t.id,todoId:t.todoId,body:e})}()},children:(t.done,"\u2611")}),Object(N.jsx)("div",{className:t.done?"todo-step greyText":"todo-step",children:t.step}),Object(N.jsx)("div",{className:"step-icons icons",onClick:function(){return a(t.id,t.todoId)},children:"\u2421"})]})})),M={addStep:function(e){return function(){var t=Object(m.a)(x.a.mark((function t(n){return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:"STATUS",payload:"loading"}),t.next=3,g("/todo/".concat(e.todoId,"/step"),"POST",e).then((function(e){return 201===e.status?(n({type:"STATUS",payload:null}),void n({type:"ADD_STEP",payload:e.step})):401===e.status?(n({type:"LOGIN",payload:!1}),void n({type:"STATUS",payload:401})):n({type:"STATUS",payload:e.status})}));case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},K=Object(r.b)(null,M)((function(e){var t=e.steps,n=e.todoId,c=e.addStep,o=Object(a.useState)(""),r=Object(T.a)(o,2),s=r[0],u=r[1],i=function(){return s?(c({step:s,todoId:n,done:!1}),void u("")):void 0};return Object(N.jsxs)("div",{className:"todo-box-steps",children:[t.map((function(e){return Object(N.jsx)(H,{step:e},e.id)})),Object(N.jsxs)("div",{className:"step-input",children:[Object(N.jsx)("input",{value:s,onChange:function(e){return u(e.target.value)},onKeyDown:function(e){return"Enter"===e.code?i():null}}),Object(N.jsx)("button",{onClick:i,className:"green",children:"Add Step"})]})]})})),R={updateTodo:F,deleteTodo:function(e){return function(){var t=Object(m.a)(x.a.mark((function t(n){return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("deleting todo #",e),n({type:"STATUS",payload:"loading"}),t.next=4,g("/todo/".concat(e),"DELETE").then((function(t){return console.log(t),202===t.status?(n({type:"STATUS",payload:null}),void n({type:"REMOVE_TODO",payload:{todoId:e}})):401===t.status?(n({type:"LOGIN",payload:!1}),void n({type:"STATUS",payload:401})):void n({type:"STATUS",payload:t.status})})).catch((function(e){}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},editTodo:function(e){return function(){var t=Object(m.a)(x.a.mark((function t(n){return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n({type:"TODO_TO_EDIT",payload:e});case 2:return n({type:"CHANGE_PAGE",payload:"editTodo"}),t.abrupt("return");case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},Y=Object(r.b)(null,R)((function(e){var t=e.todo,n=e.updateTodo,c=e.deleteTodo,o=e.editTodo,r=Object(a.useState)(!1),s=Object(T.a)(r,2),u=s[0],i=s[1],d=Object(a.useState)(!1),l=Object(T.a)(d,2),b=l[0],p=l[1],O=function(){var e,n=new Date,a=n.getFullYear()+"-"+(n.getMonth()+1)+"-"+n.getDate(),c=Math.floor(new Date(a).getTime()/864e5),o=Math.floor(new Date(t.dueDate).getTime()/864e5)-c;return e=o<0?"".concat(Math.abs(o)," days overdue!"):0===o?"Due today!":"".concat(o," days until due."),Object(N.jsx)("h3",{children:e})},f=function(){var e,n=t.steps.length;if(0===n)e="No Steps";else{var a=t.steps.filter((function(e){return e.done}));e="".concat(a.length,"/").concat(n," steps completed")}return Object(N.jsx)("h3",{children:e})};return Object(N.jsxs)("div",{className:"todo-box",children:[b?Object(N.jsx)("div",{className:"delete-todo-warning",children:Object(N.jsxs)("div",{className:"warning-box",children:[Object(N.jsx)("p",{children:"You are about to delete a todo!"}),Object(N.jsx)("p",{children:"This action is not reversable!"}),Object(N.jsx)("p",{children:"To mark as done click the green tick to the left of the todo."}),Object(N.jsxs)("div",{className:"form-buttons",children:[Object(N.jsx)("button",{className:"green",onClick:function(){return c(t.id)},children:"DELETE IT!"}),Object(N.jsx)("button",{className:"red",onClick:function(){return p(!1)},children:"Cancel"})]})]})}):null,Object(N.jsxs)("div",{className:"todo-box-todo",children:[Object(N.jsxs)("div",{className:"todo-box-icons icons",children:[Object(N.jsx)("div",{className:"todo-box-icon",onClick:function(){return n(Object(j.a)(Object(j.a)({},t),{},{done:!t.done}))},children:t.done?"\u274c":"\u2705"}),Object(N.jsx)("div",{className:"todo-box-icon",onClick:function(){return i(!u)},children:u?"\u2500":"\u2630"})]}),Object(N.jsxs)("div",{className:"todo-box-text",children:[Object(N.jsx)("div",{className:"todo-box-top",children:Object(N.jsx)("h2",{children:t.todo})}),Object(N.jsxs)("div",{className:"todo-box-bottom",children:[Object(N.jsx)(O,{}),Object(N.jsx)(f,{})]})]}),Object(N.jsxs)("div",{className:"todo-box-icons icons",children:[Object(N.jsx)("div",{className:"todo-box-icon",onClick:function(){return p(!0)},children:"\u2421"}),Object(N.jsx)("div",{className:"todo-box-icon",onClick:function(){return o(t)},children:"\u270f"})]})]}),u?Object(N.jsx)(K,{steps:t.steps,todoId:t.id}):null]})})),$={getTodos:function(){return function(){var e=Object(m.a)(x.a.mark((function e(t,n){var a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="active"===n().showTodos?"/todo":"/todo/all",t({type:"STATUS",payload:"loading"}),e.next=4,g(a,"GET").then((function(e){return 200===e.status?(t({type:"TODOS_FETCHED",payload:!0}),t({type:"SET_TODOS",payload:e.todos}),void t({type:"STATUS",payload:null})):401===e.status?(t({type:"LOGIN",payload:!1}),void t({type:"STATUS",payload:401})):void t({type:"STATUS",payload:e.status})})).catch((function(e){}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},changePage:S},V=Object(r.b)((function(e){return{todos:e.todos,todosFetched:e.todosFetched}}),$)((function(e){var t=e.todos,n=e.todosFetched,c=e.getTodos,o=e.changePage,r=Object(a.useState)("active"),s=Object(T.a)(r,2),u=s[0],i=s[1];Object(a.useEffect)((function(){n||c()}),[c,n]);return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(A,{}),Object(N.jsxs)("div",{className:"minusLogo",children:[Object(N.jsxs)("div",{className:"form-buttons",children:[Object(N.jsx)("button",{className:"green",onClick:function(){return o("addTodo")},children:"Add A Todo"}),Object(N.jsx)("button",{onClick:function(){return i("active"===u?"all":"active")},children:"active"===u?"Show All Todos":"Show Active Todos"})]}),Object(N.jsx)("div",{className:"todos-box",children:function(){var e=t.sort((function(e,t){return e.dueDate===t.dueDate?0:e.dueDate<t.dueDate?-1:1}));return"active"===u?e.filter((function(e){return e.done?null:e})):e}().map((function(e){return Object(N.jsx)(Y,{todo:e},e.id)}))})]})]})})),J=n(25),q=n.n(J),Z=(n(44),{addTodo:function(e){return function(){var t=Object(m.a)(x.a.mark((function t(n){var a;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:"STATUS",payload:"loading"}),a=Object(j.a)(Object(j.a)({},e),{},{done:!1}),t.next=4,g("/todo","POST",a).then((function(e){return 201===e.status?(n({type:"STATUS",payload:null}),n({type:"ADD_TODO",payload:e.todo}),void n({type:"CHANGE_PAGE",payload:"home"})):401===e.status?(n({type:"LOGIN",payload:!1}),void n({type:"STATUS",payload:401})):n({type:"STATUS",payload:[e.status]})})).catch((function(e){}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},changePage:S}),W=Object(r.b)(null,Z)((function(e){var t=e.addTodo,n=e.changePage,c=function(e){return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()},o=Object(a.useState)(""),r=Object(T.a)(o,2),s=r[0],u=r[1],i=Object(a.useState)(c(new Date)),d=Object(T.a)(i,2),l=d[0],j=d[1],b=Object(a.useState)(!1),p=Object(T.a)(b,2),O=p[0],f=p[1],h=Object(a.useState)(!1),v=Object(T.a)(h,2),y=v[0],x=v[1],m=Object(a.useState)(!1),g=Object(T.a)(m,2),S=g[0],E=g[1];Object(a.useEffect)((function(){f(!s)}),[s]),Object(a.useEffect)((function(){/^[0-9]{4}-[0-9]{1,2}-[0-9]{1,2}$/.test(l)?x(!1):x(!0)}),[l]),Object(a.useEffect)((function(){E(!(!O&&!y))}),[O,y]);var w=function(){return Object(N.jsxs)("div",{className:"form-buttons",children:[S?null:Object(N.jsx)("button",{className:"green",onClick:function(){return t({todo:s,dueDate:l})},children:"Add It!"}),Object(N.jsx)("button",{className:"red",onClick:function(){return n("home")},children:"Cancel"})]})};return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(A,{}),Object(N.jsxs)("div",{className:"minusLogo",children:[Object(N.jsx)("h1",{children:"Add A Todo"}),Object(N.jsxs)("div",{className:"form-box",children:[Object(N.jsx)("label",{children:"Todo:"}),Object(N.jsx)("input",{className:O?"error":"",value:s,onChange:function(e){var t=e.target.value.replace(/[^a-zA-Z0-9 .,]/,"");u(t)},onKeyDown:function(e){return"Enter"===e.code?void(S||t({todo:s,dueDate:l})):null}}),Object(N.jsx)("label",{children:"Due Date:"}),Object(N.jsx)(q.a,{className:"input",dateFormat:"dd/MM/yyyy",onChange:function(e){null===e||isNaN(e.getTime())?j(c(new Date)):j(c(e))},selected:new Date(l)}),Object(N.jsx)(w,{})]})]})]})})),B={changePage:S,updateTodo:F},Q=Object(r.b)((function(e){return{todoToUpdate:e.todoToUpdate}}),B)((function(e){var t=e.todoToUpdate,n=e.updateTodo,c=e.changePage,o=function(e){return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()},r=Object(a.useState)(""),s=Object(T.a)(r,2),u=s[0],i=s[1],d=Object(a.useState)(o(new Date)),l=Object(T.a)(d,2),b=l[0],p=l[1],O=Object(a.useState)(!1),f=Object(T.a)(O,2),h=f[0],v=f[1],y=Object(a.useState)(!1),x=Object(T.a)(y,2),m=x[0],g=x[1],S=Object(a.useState)(!1),E=Object(T.a)(S,2),w=E[0],D=E[1];Object(a.useEffect)((function(){null!==t&&(i(t.todo),p(t.dueDate))}),[t]),Object(a.useEffect)((function(){v(!u)}),[u]),Object(a.useEffect)((function(){/^[0-9]{4}-[0-9]{1,2}-[0-9]{1,2}$/.test(b)?g(!1):g(!0)}),[b]),Object(a.useEffect)((function(){D(!(!h&&!m))}),[h,m]);var C=function(){return Object(N.jsxs)("div",{className:"form-buttons",children:[w?null:Object(N.jsx)("button",{className:"green",onClick:function(){return n(Object(j.a)(Object(j.a)({},t),{},{todo:u,dueDate:b}))},children:"Update It!"}),Object(N.jsx)("button",{className:"red",onClick:function(){return c("home")},children:"Cancel"})]})};return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(A,{}),Object(N.jsxs)("div",{className:"minusLogo",children:[Object(N.jsx)("h1",{children:"Update A Todo"}),Object(N.jsxs)("div",{className:"form-box",children:[Object(N.jsx)("label",{children:"Todo:"}),Object(N.jsx)("input",{className:h?"error":"",value:u,onChange:function(e){var t=e.target.value.replace(/[^a-zA-Z0-9 .,]/,"");i(t)},onKeyDown:function(e){return"Enter"===e.code?void(w||n(Object(j.a)(Object(j.a)({},t),{},{todo:u,dueDate:b}))):null}}),Object(N.jsx)("label",{children:"Due Date:"}),Object(N.jsx)(q.a,{className:"input",dateFormat:"dd/MM/yyyy",onChange:function(e){null===e||isNaN(e.getTime())?p(o(new Date)):p(o(e))},selected:new Date(b)}),Object(N.jsx)(C,{})]})]})]})})),X={updateUser:function(e){return function(){var t=Object(m.a)(x.a.mark((function t(n){return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:"STATUS",payload:"loading"}),t.next=3,g("/user","PUT",e).then((function(e){return console.log(e),401===e.status?(n({type:"LOGIN",payload:!1}),void n({type:"STATUS",payload:e.status})):202===e.status?(n({type:"STATUS",payload:null}),void n({type:"CHANGE_PAGE",payload:"home"})):void n({type:"STATUS",payload:e.status})}));case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},setStatus:k,changePage:S},ee=Object(r.b)(null,X)((function(e){var t=e.updateUser,n=e.setStatus,c=e.changePage,o=Object(a.useState)(!1),r=Object(T.a)(o,2),s=r[0],u=r[1],i=Object(a.useState)({name:"",email:""}),d=Object(T.a)(i,2),l=d[0],j=d[1],b=Object(a.useState)(""),p=Object(T.a)(b,2),O=p[0],f=p[1],h=Object(a.useState)(""),v=Object(T.a)(h,2),y=v[0],S=v[1],E=Object(a.useState)(""),w=Object(T.a)(E,2),D=w[0],C=w[1],U=Object(a.useState)(!1),P=Object(T.a)(U,2),k=P[0],I=P[1],G=Object(a.useState)(!1),L=Object(T.a)(G,2),_=L[0],F=L[1],z=Object(a.useState)(!1),H=Object(T.a)(z,2),M=H[0],K=H[1],R=Object(a.useState)(!1),Y=Object(T.a)(R,2),$=Y[0],V=Y[1];Object(a.useEffect)((function(){var e=function(){var e=Object(m.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.next=3,g("/user","GET").then((function(e){if(200===e.status)return u(!1),j(e.user),f(e.user.name),void S(e.user.email);n(e.status)})).catch((function(e){}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[n]),Object(a.useEffect)((function(){I(!O)}),[O]),Object(a.useEffect)((function(){/^[a-z0-9.]+@[a-z0-9]+.[a-z0-9]+.[a-z0-9]{1,3}$/.test(y)?F(!1):F(!0)}),[y]),Object(a.useEffect)((function(){K(!D)}),[D]),Object(a.useEffect)((function(){V(!!(k||_||M))}),[k,_,M]);var J=function(){$?console.log("errors, skipping"):O!==l.name||y!==l.email?t({name:O,email:y,pword:D}):console.log("no difference, returning")},q=function(){return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsxs)("div",{className:"form-buttons",children:[$?null:Object(N.jsx)("button",{className:"green",onClick:J,children:"Update User"}),Object(N.jsx)("button",{className:"red",onClick:function(){return c("home")},children:"Cancel"})]}),Object(N.jsx)("div",{className:"form-buttons",children:Object(N.jsx)("button",{className:"blue",onClick:function(){return c("updatePassword")},children:"Update Password"})})]})};return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(A,{}),Object(N.jsxs)("div",{className:"minusLogo",children:[Object(N.jsx)("h1",{children:"Edit Your Details"}),s?Object(N.jsx)("div",{className:"spinner"}):Object(N.jsxs)("div",{className:"form-box",children:[Object(N.jsx)("label",{children:"Name:"}),Object(N.jsx)("input",{className:k?"error":"",value:O,onChange:function(e){return f(e.target.value)}}),Object(N.jsx)("label",{children:"Email:"}),Object(N.jsx)("input",{className:_?"error":"",value:y,onChange:function(e){return S(e.target.value)}}),Object(N.jsx)("label",{children:"Password:"}),Object(N.jsx)("input",{className:M?"error":"",value:D,onChange:function(e){return C(e.target.value)},type:"password"}),Object(N.jsx)(q,{})]})]})]})})),te={changePage:S,updatePassword:function(e){return function(t){return console.log(e),g("/user/password","PUT",e).then((function(e){return console.log(e),401===e.status?(t({type:"LOGIN",payload:!1}),t({type:"STATUS",payload:e.status}),void t({type:"CHANGE_PAGE",payload:"home"})):202===e.status?(t({type:"STATUS",payload:null}),void t({type:"CHANGE_PAGE",payload:"home"})):void t({type:"STATUS",payload:e.status})}))}}},ne=Object(r.b)(null,te)((function(e){var t=e.changePage,n=e.updatePassword,c=Object(a.useState)(""),o=Object(T.a)(c,2),r=o[0],s=o[1],u=Object(a.useState)(""),i=Object(T.a)(u,2),d=i[0],l=i[1],j=Object(a.useState)(""),b=Object(T.a)(j,2),p=b[0],O=b[1],f=Object(a.useState)(!1),h=Object(T.a)(f,2),v=h[0],y=h[1],x=Object(a.useState)(!1),m=Object(T.a)(x,2),g=m[0],S=m[1],E=Object(a.useState)(!1),w=Object(T.a)(E,2),D=w[0],C=w[1],U=Object(a.useState)(!1),P=Object(T.a)(U,2),k=P[0],I=P[1];Object(a.useEffect)((function(){y(!r)}),[r]),Object(a.useEffect)((function(){S(!d)}),[d]),Object(a.useEffect)((function(){C(!p||p!==d)}),[p,d]),Object(a.useEffect)((function(){I(!!(v||g||D))}),[v,g,D]);var G=function(){k||r===d?console.log("returning"):(console.log("submitting"),console.log({pword:r,newPword:d}),n({pword:r,newPword:d}))},L=function(e){"Enter"===e.code&&G()},_=function(){return Object(N.jsxs)("div",{className:"form-buttons",children:[k?null:Object(N.jsx)("button",{className:"green",onClick:function(){return G()},children:"Update"}),Object(N.jsx)("button",{className:"red",onClick:function(){return t("home")},children:"Cancel"})]})};return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(A,{}),Object(N.jsxs)("div",{className:"minusLogo",children:[Object(N.jsx)("h1",{children:"Update Your Password"}),Object(N.jsxs)("div",{className:"form-box",children:[Object(N.jsx)("label",{children:"Old Password:"}),Object(N.jsx)("input",{type:"password",onKeyDown:function(e){return L(e)},className:v?"error":"",value:r,onChange:function(e){return s(e.target.value)}}),Object(N.jsx)("label",{children:"New Password:"}),Object(N.jsx)("input",{type:"password",onKeyDown:function(e){return L(e)},className:g?"error":"",value:d,onChange:function(e){return l(e.target.value)}}),g?null:Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("label",{children:"Confirm New Password:"}),Object(N.jsx)("input",{type:"password",onKeyDown:function(e){return L(e)},className:D?"error":"",value:p,onChange:function(e){return O(e.target.value)}})]}),Object(N.jsx)(_,{})]})]})]})})),ae=Object(r.b)((function(e){return{login:e.login,page:e.page}}),{ping:function(){return function(){var e=Object(m.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g("/ping","GET").then((function(e){return 200===e.status&&"ok"===e.message?t({type:"LOGIN",payload:!0}):t({type:"LOGIN",payload:!1})})).catch((function(e){}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})((function(e){var t=e.login,n=e.page,c=e.ping;Object(a.useEffect)((function(){c()}),[c]);var o=function(){if(!t)return"createAccount"===n?Object(N.jsx)(P,{}):Object(N.jsx)(C,{});switch(n){default:return Object(N.jsx)(V,{});case"addTodo":return Object(N.jsx)(W,{});case"editTodo":return Object(N.jsx)(Q,{});case"editUser":return Object(N.jsx)(ee,{});case"updatePassword":return Object(N.jsx)(ne,{})}};return Object(N.jsxs)("div",{className:"App",children:[Object(N.jsx)(_,{}),Object(N.jsx)(o,{})]})})),ce=Object(s.c)(v,Object(s.a)(u.a));o.a.render(Object(N.jsx)(r.a,{store:ce,children:Object(N.jsx)(ae,{})}),document.querySelector("#root"))},57:function(e,t,n){}},[[104,1,2]]]);
//# sourceMappingURL=main.9500ab37.chunk.js.map